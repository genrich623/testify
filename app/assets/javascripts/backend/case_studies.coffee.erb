$ ->
  $('.froala').froalaEditor({
      toolbarStickyOffset: 50
  })
  code_shown = false
  btn = $('#generate-code')
  code = $('#code').hide()
  btn.click (e) ->
    slide = if code_shown then 'slideUp' else 'slideDown'
    code[slide]()
    code_shown = !code_shown
    e.preventDefault()

  # Editor
  $('.choose-template').on 'click', (e) ->
    self = $(this)
    editor = $(self.data('editor'))

    if editor.froalaEditor('html.get', true).length
      return unless confirm("<%= I18n.t('js.confirm') %>")

    $.ajax
      url: self.data('url')
      success: (response) ->
        editor.froalaEditor 'html.set', response.template, true
        $('#tile-client').html $('#case_study_client').val() + '<br/>'
        $('#tile-title').html $('#case_study_title').val()

    e.preventDefault()

    # Copy to clipboard behaviour

  # Accordion scripting
  $('#infoNext').click ->
    if $(this).prop('disabled') != true
      $('#caseStudyInfo').collapse('hide')
      $('#caseStudyTemplate').collapse('show')